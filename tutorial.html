<!DOCTYPE html>
<html lang="en">

<!-- +AMDG -->

<head>
<title>minlib | Documentation</title>
<meta charset="UTF-8" />
<meta name="description" content="minlib, a powerful, fast,
simple library management program with a text user interface
(TUI) and powerful customization features" />
<link rel="stylesheet" type="text/css" href="mldocsty.css" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="icon" type="image/png" href="favicon.png" />
<link rel="alternate" type="application/rss+xml"
	title="minlib RSS feed" href="minlib.rss" />
<link rel="license" 
	href="https://creativecommons.org/licenses/by-sa/2.0/" />
</head>
<body>

<div class="dedic">
<a href="amdg.html">+<br />
AMDG</a><br />
</div>

<header class="topbar">
<h1><a class="imglink" href="index.html"><img src="txt_logo.png" alt="minlib Logo" /></a>minlib</h1>

<nav class="toolbar">
<ul>
<li><a title="minlib:  Documentation" href="ml_docs.html">Documentation</a>&nbsp;|</li>
<li><a title="minlib:  Our Copyright" href="gpl-3.0-standalone.html">Copyright</a>&nbsp;|</li>
<li><a title="minlib:  Screenshots" href="screenshots.html">Screenshots</a>&nbsp;|</li>
<li><a title="minlib:  Change Log" href="changes.html">Change Log</a></li>
</ul>
</nav>
</header>

<div class="mainpart">

<h1>Minlib Tutorial</h1>

<p><span class="fl">A</span>s with any piece of unfamiliar
software, it takes some time to get used to minlib.
However, despite its power as a library management program,
it's pretty simple to operate, and it won't take very long
to be using it with ease.</p>

<p>To get started, you'll need to have at your disposal a
command line.  While minlib doesn't require you to work with
it on the command line (that's what its text user interface,
or TUI, is for), the command line is the normal way to start
it up.  We will use 

<pre class="demo">$&gt;</pre>

to show the command prompt, and the following line (if any)
will be the output that minlib produces.  You are supposed
to type what appears on the line after the prompt.

<a name="getstart"></a>
<h2>Getting Started</h2>

<center>
<a href="#getstart">Getting Started</a> |
	<a href="#runminlib">Running Minlib</a> |
	<a href="#confminlib">Configuring Minlib</a>
</center>

<p>To get started using minlib, you'll really only need one
thing:  a <em>data file</em>.  This is the file that minlib
uses to form its list of your library, making all the useful
features of minlib possible.  It's so important, in fact,
that minlib is entirely useless without one, and if you
don't provide it with one, minlib will simply let you know
that it doesn't have anything to work with, and will
quit:</p>

<pre class="demo">
$&gt;  minlib
minlib:  no input file specified
</pre>

<p>So you need to give minlib something to work with; you
need to give it your data file.  You can do this in one of
two ways.  Let's take a common use case:  you're trying to
convert your library over from calibre.  Unlike calibre,
minlib does not force you to store your files in a
particular way; so converting your calibre use to minlib is
a simple matter:  use the "<strong>-a</strong>" option.
Take note of whatever directory you told calibre to use for
storing your books.  Then enter the following:

<pre class="demo">
$&gt;  minlib -a /your/book/directory > library_file
metadata.db not a minlib format; skipping...
Processing mybook.pdf...
Processing mybook.epub...
Processing mybook_1.html...
Processing mybook_2.html...
Processing mybook_3.html...
....
</pre>

And so on.  Depending on the size of your library, this may
take a while to run; but minlib will provide you plenty of
output to let you know what it's doing.  All of that
feedback about what minlib is doing will be output to
"stderr," so you'll be able to watch what minlib is doing;
but the actual metadata from your files is written to
"stdout," so once minlib is finished, you'll find your data
file in "<strong>library_file</strong>.</p>

<p>If you open <strong>library_file</strong>, it will look
something like this:</p>

<pre class="demo">
%%
TITLE:	Lawrence Lessig: - Free Culture - How Big Media Uses Technology and the Law to Lock Down Culture and Control Creativity
SUBJECT:	law
KEYWORDS:	law
AUTHOR:	LM-sisu-scribe
CREATOR:	LaTeX with hyperref package
PRODUCER:	xdvipdfmx (0.7.8)
CREATIONDATE:	Fri Mar 11 09:41:37 2011
TAGGED:	no
ENCRYPTED:	no
PAGESIZE:	612 x 792 pts (letter)
PAGEROT:	0
PDFVERSION:	1.4
PATH:	/your/book/directory/lessig_free_culture.pdf
%%
TITLE:	Choregraphie, ou, L'art de d√©crire la dance, par caracteres, ...
KEYWORDS:	http://www.archive.org/details/choregraphieoula00feui
AUTHOR:	Feuillet, Raoul-Auger, 1659 or 60-1710
CREATOR:	Digitized by the Internet Archive
PRODUCER:	Recoded by LuraDocument PDF v2.28
CREATIONDATE:	Sat Mar 20 01:00:45 2010
MODDATE:	Sat Mar 20 01:22:31 2010
TAGGED:	no
ENCRYPTED:	no
PAGESIZE:	350 x 498 pts
PAGEROT:	0
PDFVERSION:	1.5
PATH:	/your/book/directory/choregraphieoula00feui.pdf
....
</pre>

<p>Depicted above are two <em>records</em>, each of which
lists the metadata for one book.  All of this information,
except the line labelled "<strong>PATH</strong>", comes
directly from the files themselves; the
<strong>PATH</strong> line is supplied by minlib.  Of
course, minlib will traverse the entire directory tree and
do this for all the files in formats it recognizes; other
files it will simply ignore.</p>

<p>Each record is separated from the ones above and below it
by a line containing "<strong>%%</strong>"; even the first
record must begin with this line, but the last record does
not need to be followed by it.  Each line consists of a
<em>field name</em>, which is a series of all-caps (and
optionally periods) closed by a colon, followed by either
nothing or any amount of whitespace, followed by the
<em>field data</em>, which is arbitrary information which
consists of the rest of the line.  The field data can be of
any length; our second record shows an abnormally long title
(beginning with "Choregraphie"), but the field data has no
length limit at all.</p>

<p>In any case, now you have your data file (at least one;
it's likely you'll wind up with several as time goes on,
each containing different types of media; but you may choose
to keep them all in one, if you wish); now try running:</p>

<pre class="demo">
$&gt; minlib -f library_file
</pre>

And we'll see what happens then in our next section.

<a name="runminlib"></a>
<h2>Running Minlib</h2>

<center>
<a href="#getstart">Getting Started</a> |
	<a href="#runminlib">Running Minlib</a> |
	<a href="#confminlib">Configuring Minlib</a>
</center>

<p>Having run the last-listed command above, minlib will
start itself up and show you the listings of your library.
By default, it looks something like this:</p>

<img class="sshot" src="initial_shot.png" />

<p>(We say "by default" because the colors and format are
extremely customizable, about which we'll see more later.
But the above is what minlib does unless you tell it to do
otherwise.)</p>

<p>Let's look at that image above for a moment.  The line at
the very bottom, with blue text, is immaterial; it is simply
a function of the author's totally unrelated configuration
of GNU screen.  But we can see several important parts of
the screen that minlib presents to you above, each of which
serves a different function.</p>

<img class="sshot" src="labelled_diagram.png" />

<p>The <em>top bar</em> provides you the name and version of
the program; the total number of records that minlib
currently has loaded; and identifies that you are in
<em>menu view</em> (as opposed to <em>detail view</em>,
which is reached by hitting "enter" on one of the menu
options).  The <em>bottom bar</em> lists your options for
actions, and is relatively self-explanatory.  Then there are
the <em>menu options</em>, which is the list of records in
your library; scroll up or down to see more.  Finally, there
is the <em>cursor</em>, which highlights the
currently-selected item; in this case, Orwell's
<em>1984</em>.</p>

<p>Finally, there is the line just below the bottom bar,
which prints messages for the user.  Most of the time it
will be empty; however, it will often contain important
information for the user.  We will call this the <em>status
line</em>.</p>

<p>You can move around in menu view in the following
ways:</p>

<ul>
<li><em>Scroll up and down</em>:  use either your up and
down arrow keys, or use 'j' for down and 'k' for up.</li>
<li><em>Page up and down</em>:  use the "Page Up" and "Page
Down" keys to scroll up and down by a page at a time.</li>
<li><em>Menu up and down</em>:  you can skip straight to the
top or bottom of the menu view by using the "Home" and "End"
keys on your keyboard.</li>
<li><em>Match</em>:  you can do a quick and simple matching
of records.  In the default view, for example, you can find
<em>1984</em> easily by simply typing 'm', then entering the
first few characters in the title.  There may be more than
one match; if that's so, use 'p' to find the next match, or
'P' (capital 'p') to find the previous one.  The status line
will print whether a match was found or not.</li>
<li><em>Search</em>:  you can do full record searches of
your entire library.  Hit '/' (forward slash), then type in
the text you want to find.  You can enter any
POSIX-compliant regular expression here; if you don't know
what that means, don't worry about it, and just know that
you can match text anywhere in the library.  There may be
more than one match; if that's so, use 'n' to find the next
match, or 'N' (capital 'n') to find the previous one.  The
status line will print whether a match was found, and if so,
how many.  It will also inform you if there was an error in
the regular expression you entered, if any.</li>
</ul>

<p>So consider the following screen:</p>

<img class="sshot" src="regexp_error.png" />

<p>Note the status line; it reads "<strong>error:  Trailing
backslash</strong>".  This indicates that the user tried to
search with a regular expression, but he accidentally left a
trailing backslash, which caused an error.  He should try
again.  The status line can also contain more pleasant
information:</p>

<img class="sshot" src="regexp_matches.png" />

<p>If you find a work you're interested in viewing more
information about, you should go to its <em>detail
view</em>; this is done simply by hitting the
"<strong>enter</strong>" key when you have your cursor on
the record you want.  You will be faced with something like
this:</p>

<img class="sshot" src="detail_view.png" />

<p>As noted above, all of this information except for the
"<strong>PATH</strong>" field was derived automatically from
the pdf file; the PATH field was added by minlib.  We can
see a few things about detail view from this screenshot:</p>

<ul>
<li>Word wrapping is basic and na&iuml;ve; lines are wrapped
simply at whatever character happens to fall at the end of
the line.</li>
<li>Sometimes the metadata will exceed the available space
on the screen.  No worries; <em>scroll down</em> with the
down-arrow key or 'j'; <em>scroll up</em> with the up-arrow
key or 'k', just as you do in menu view.</li>
<li>A record number is centered at the top of the screen.
This is the record number as it appears in your data file;
it is <em>not</em> the order in which tye appear in menu
view.</li>
</ul>

<p>In both views, two options are always available:
<em>open</em> and <em>shell</em>.  Hit 'o' to open; the
bottom bar will then give you options of which type of file
you'd like to open, along with the keys you press to open
them.  E.g., 'p' will open a pdf, while 'P' (capital 'p')
will open a Postscript file, and 'e' will open epub.
Because of this, you can have multiple file types of the
same work in the same record, and minlib will open the one
you'd like.</p>

<p>Hit ':' for the shell.  This will call the default shell
on your system, as expressed by the environment variable
"SHELL"; if this does not exist, it simply calls the POSIX
shell, "<strong>/bin/sh</strong>".  This is especially
useful in two primary cases:</p>

<ol>
<li>You have a file in a record which is in a format which
minlib doesn't know.  By pulling that record up in detail
view, you can have the path to the file displayed on your
screen, then shell out with ':' and open it with the
application of your choice from there.  This is also useful
for opening files in a different application than normal.
Perhaps your default pdf viewer is xpdf, but you'd like to
open this particular file in okular.  Shell out with ':',
type "okular" followed by the name of the file, and put it
in the background by closing your command with "&amp;".
E.g.:

<pre class="demo">
: $&gt; okular  /your/library/directory/great_file.pdf &amp;
</pre>
</li>

<li>You want to convert your file to another format.
Minlib does one thing---manage your digital library---and
does it well.  It's not a file-format converter, and it
doesn't want to be; but it does want to make it easy for you
to run one.  Say you have an old Postscript file you want to
convert to pdf.  Minlib doesn't do this for you (and it
shouldn't; that's not what minlib is), but you can still do
it easily:

<pre class="demo">
: $&gt; ps2pdf /your/library/directory/old_file.ps
</pre>

And it's converted.  You can add the new file to your
database as a new record by itself:

<pre class="demo">
: $&gt; minlib -a /your/library/directory/old_file.pdf &gt;&gt; library_file
</pre>

(Make sure you use <em>two</em> "&gt;", not one, or it will
overwrite your library file!  Two will simply append it to
the end.)  Or you can edit your library file and add an
extra path command to that record.</li>
</li>
</ol>

<p>Hit 'r' to reload.  In menu view only, there is the
option to <em>reload your data file</em>, by pressing 'r'.
Perhaps you've been working on a record, converted an old
Postscript file to a pdf, and have then shelled out to add
that data to your data file.  While it's in your data file,
minlib still doesn't know about it; minlib loaded your data
file when you started the program.  So hit 'r' to reload the
file.  This literally simply reruns the program with the
exact same command line you used to start it, so it will
result in you having your program up and just as it was
before, except for the changes you made to your data
file.</p>

<p>And that's more or less all there is to running minlib.
Now let's look at some of the ways you can control the way
minlib looks and behaves.</p>

<a name="confminlib"</a>
<h2>Configuring Minlib</h2>

<center>
<a href="#getstart">Getting Started</a> |
	<a href="#runminlib">Running Minlib</a> |
	<a href="#confminlib">Configuring Minlib</a>
</center>

<p>When you start minlib, it goes out hunting for an <em>rc
file</em>, also called a <em>config file</em>.  By default,
that file is <strong>$HOME/.minlibrc</strong>, but it can be
anywhere; just let minlib know with the
"<strong>-c</strong>" command line option:</p>

<pre class="demo">
$&gt; minlib -c rcfile -f library_file
</pre>

<p>If you give minlib a config file on the command line in
this way, minlib will respect that file and ignore
<strong>$HOME/.minlibrc</strong>, even if it exists.  If you
neither give minlib a config file on the command line nor
have a <strong>$HOME/.minlibrc</strong>, minlib will simply
start with default options, which we saw above.</p>

<p>You can customize minlib's formatting of your records,
the colors of the different parts of the screen, and the
programs that minlib will call when you ask it to open a
file.  This can produce nice-looking, sober examples:</p>

<img class="sshot" src="pers_colors.png" />

<p>Or some true monstrosities:</p>

<img class="sshot" src="crazy_conf.png" />
<img class="sshot" src="crazy_details.png" />

<p>How you do it is up to you; the sky's the limit.</p>

<p>All minlib configuration options are of the same format:
a configuration option in all caps, followed by a colon,
followed by an arbitrary amount (or lack) of whitespace,
followed by the option text.  E.g.:</p>

<pre class="demo">
TOP_FORE_COLOR:  COLOR_YELLOW
TOP_BACK_COLOR:  COLOR_BLUE
DEF_PDF_VIEWER:	xpdf "%s"
</pre>

<p>Couldn't be simpler.  Now, on to the actually
configuration options!</p>

<h3>Color Configurations</h3>

<p>We saw above what we call the various parts of the minlib
screen; each of those parts is colored by a separate
<em>color pair</em>, the first color of which forms the
foreground (the color of the text), and the second color of
which forms the background.  Minlib accepts standard ncurses
colors; these are entered in all-caps and consist of
<strong>COLOR_BLACK</strong>, <strong>COLOR_RED</strong>,
<strong>COLOR_GREEN</strong>, <strong>COLOR_YELLOW</strong>,
<strong>COLOR_BLUE</strong>, <strong>COLOR_MAGENTA</strong>,
<strong>COLOR_CYAN</strong>, or
<strong>COLOR_WHITE</strong>.  They can be assigned to the
various parts of the minlib screen as follows: </p>

<table class="realtable">
	<tr>
		<th>Field</th><th>Description</th><th>Default</th>
	</tr>
	<tr>
		<td>TOP_FORE_COLOR</td>
		<td>The text in the top bar, both in menu and detail
		view.</td>
		<td>COLOR_BLACK</td>
	</tr>
	<tr>
		<td>TOP_BACK_COLOR</td>
		<td>The background of the top bar, both in menu and detail
		view.</td>
		<td>COLOR_WHITE</td>
	</tr>
	<tr>
		<td>BOT_FORE_COLOR</td>
		<td>The text in the bottom bar, both in menu and detail
		view.</td>
		<td>COLOR_BLACK</td>
	</tr>
	<tr>
		<td>BOT_BACK_COLOR</td>
		<td>The background of the bottom bar, both in menu and detail
		view.</td>
		<td>COLOR_WHITE</td>
	</tr>
	<tr>
		<td>MEN_FORE_COLOR</td>
		<td>The foreground color in the menu.  This means that
		it is the text color in those menu items which are not
		currently selected, and the background color of the
		line which currently has the cursor.</td>
		<td>COLOR_BLACK</td>
	</tr>
	<tr>
		<td>MEN_BACK_COLOR</td>
		<td>The background color in the menu.  This means that
		it is the background color of those menu items which
		are not currently selected, and the text color of the
		line which currently has the cursor.</td>
		<td>COLOR_WHITE</td>
	</tr>
	<tr>
		<td>DET_BACK_COLOR</td>
		<td>The background color for detail view.</td>
		<td>COLOR_BLACK</td>
	</tr>
	<tr>
		<td>DET_FIELD_FORE_COLOR</td>
		<td>The text color for the field names in detail
		view.</td>
		<td>COLOR_WHITE</td>
	</tr>
	<tr>
		<td>DET_FIELD_BACK_COLOR</td>
		<td>The background color for the field names in detail
		view.</td>
		<td>COLOR_BLACK</td>
	</tr>
	<tr>
		<td>DET_TXT_FORE_COLOR</td>
		<td>The text color for the field values in detail
		view.</td>
		<td>COLOR_WHITE</td>
	</tr>
	<tr>
		<td>DET_TXT_BACK_COLOR</td>
		<td>The background color for the field values in detail
		view.</td>
		<td>COLOR_BLACK</td>
	</tr>
</table>

<p>So find a color scheme you like and put it in your
<strong>.minlibrc</strong> file; it can help make minlib
even more of a pleasure to use.</p>

<h3>Applications</h3>

<p>Most of the files in your library are going to require
some application to view.  Below find the field strings for
configuring these applications, along with a brief
description of the file extensions they're expected to open,
and the default for each.</p>

<table class="realtable">
<tr>
	<th>Field</th>
	<th>Description</th>
	<th>Default</th>
</tr>
<tr>
	<td>DEF_PDF_VIEWER</td>
	<td>pdf files</td>
	<td><pre>xpdf "%s"</pre></td>
</tr>
<tr>
	<td>DEF_EPUB_VIEWER</td>
	<td>epub files</td>
	<td><pre>fbreader "%s"</pre></td>
</tr>
<tr>
	<td>DEF_HTML_VIEWER</td>
	<td>HTML files</td>
	<td><pre>w3m "%s"</pre></td>
</tr>
<tr>
	<td>DEF_OGV_VIEWER</td>
	<td>Ogg Theora (video) files</td>
	<td><pre>vlc "%s"</pre></td>
</tr>
<tr>
	<td>DEF_OGG_VIEWER</td>
	<td>Ogg Vorbis (audio) files</td>
	<td><pre>ogg123 "%s"</pre></td>
</tr>
<tr>
	<td>DEF_DVI_VIEWER</td>
	<td>dvi files; old-school TeX output, rarely encountered
	in the wild</td>
	<td><pre>xdvi "%s"</pre></td>
</tr>
<tr>
	<td>DEF_PS_VIEWER</td>
	<td>Postscript files</td>
	<td><pre>gs "%s"</pre></td>
</tr>
<tr>
	<td>DEF_OFFICE_VIEWER</td>
	<td>"Office suite" files; odt, odf, ods, odp, doc, ppt,
	xls, docx, pptx, xlsx</td>
	<td><pre>libreoffice "%s"</pre></td>
</tr>
</table>

<p>Note the "%s" in every default string; this is necessary
for minlib to determine what exact command to call when you
ask it to open something for you.  The "%s" will be replaced
with the <strong>PATH</strong> field corresponding to your
file type.  There can be only one "%s" in your call; but you
can use as complex a command line as you like, as long as
"%s" is in it.</p>

<hr />
<footer class="bottomstuff">
<div class="homelink"><a href="index.html">Home</a></div>
<a href="gorfeed.rss">RSS Newsfeed</a><br />
<a href="webmas.html">E-Mail the Webmaster</a> | <a href="changes.html">Change Log</a><br />
</footer>
</div>
</body>
</html>
